import{a as e}from"./index-fZjk1EK6.js";import{A as l}from"./config-CPUpIrL5.js";import{E as t}from"./elementPlus-D3jm9WeK.js";import{x as a,r,c as n,y as i,A as o,I as s,aq as u,G as c,H as d,P as x,J as v,ag as g,L as T,M as f,z as h}from"./vue-CYQ3jvsg.js";import{_ as m}from"./index-CSUhv2L2.js";const p={class:"text-corrector"},_={class:"correction-result"},y={class:"text-diff"},M={class:"original"},b=["innerHTML"],j={class:"corrected"},w=["innerHTML"],H={class:"correction-stats"},L=m(a({__name:"TextCorrectorView",setup(a){const m=r(!1),L=r({originalText:"",correctedText:""}),C=n((()=>{if(!L.value.originalText||!L.value.correctedText)return 0;let e=0;const l=L.value.originalText,t=L.value.correctedText,a=Math.max(l.length,t.length);for(let r=0;r<a;r++)l[r]!==t[r]&&e++;return e})),V=n((()=>{if(!L.value.originalText||!L.value.correctedText)return"";let e="";const l=L.value.originalText,t=L.value.correctedText,a=Math.max(l.length,t.length);for(let r=0;r<a&&!(r>=l.length);r++)r<t.length&&l[r]!==t[r]?e+=`<span class="diff-highlight">${l[r]||""}</span>`:e+=l[r]||"";return e})),k=n((()=>{if(!L.value.originalText||!L.value.correctedText)return"";let e="";const l=L.value.originalText,t=L.value.correctedText,a=Math.max(l.length,t.length);for(let r=0;r<a&&!(r>=t.length);r++)r<l.length&&l[r]!==t[r]?e+=`<span class="diff-highlight">${t[r]||""}</span>`:e+=t[r]||"";return e})),A=async()=>{if(L.value.originalText){m.value=!0;try{const a=await e.post(l.textCorrection.correct,{text:L.value.originalText});L.value.correctedText=a.data.correctedText||L.value.originalText,L.value.correctedText===L.value.originalText?t.info("文本没有需要纠正的错误"):t.success("文本纠错完成")}catch(a){t.error("纠错失败，请稍后重试")}finally{m.value=!1}}else t.warning("请输入需要纠错的文本")},I=()=>{L.value.originalText="",L.value.correctedText=""};return(e,l)=>{const t=g("el-input"),a=g("el-form-item"),r=g("el-button"),n=g("el-form"),P=u("loading");return h(),i("div",p,[l[5]||(l[5]=o("h1",null,"文本纠错工具",-1)),s((h(),c(n,{model:L.value,"label-width":"120px"},{default:d((()=>[x(a,{label:"原始文本"},{default:d((()=>[x(t,{modelValue:L.value.originalText,"onUpdate:modelValue":l[0]||(l[0]=e=>L.value.originalText=e),type:"textarea",rows:8,placeholder:"请输入需要纠错的文本"},null,8,["modelValue"])])),_:1}),x(a,null,{default:d((()=>[x(r,{type:"primary",onClick:A,disabled:!L.value.originalText},{default:d((()=>l[1]||(l[1]=[T(" 纠错 ")]))),_:1},8,["disabled"]),x(r,{onClick:I},{default:d((()=>l[2]||(l[2]=[T("清空")]))),_:1})])),_:1}),L.value.correctedText?(h(),c(a,{key:0,label:"纠错结果"},{default:d((()=>[o("div",_,[o("div",y,[o("div",M,[l[3]||(l[3]=o("h4",null,"原文",-1)),o("div",{innerHTML:V.value,class:"text-content"},null,8,b)]),o("div",j,[l[4]||(l[4]=o("h4",null,"纠错后",-1)),o("div",{innerHTML:k.value,class:"text-content"},null,8,w)])]),o("div",H,[o("p",null,"纠错数量: "+f(C.value),1)])])])),_:1})):v("",!0)])),_:1},8,["model"])),[[P,m.value]]),l[6]||(l[6]=o("div",{class:"tips"},[o("h3",null,"使用说明："),o("ul",null,[o("li",null,'输入需要纠错的文本，点击"纠错"按钮进行文本纠错'),o("li",null,"系统会自动检测并修正文本中的错别字、病句等问题"),o("li",null,"纠错结果将以对比形式展示，方便查看修改前后的差异")])],-1))])}}}),[["__scopeId","data-v-ce8f1d26"]]);export{L as default};
