import{aB as e,r as t,c as a}from"./vue-CYQ3jvsg.js";import{a as l}from"./index-fZjk1EK6.js";var r=(e=>(e.ACTIVE="ACTIVE",e.COMPLETED="COMPLETED",e.CANCELLED="CANCELLED",e.EXPIRED="EXPIRED",e))(r||{});const u=l.create({baseURL:"http://localhost:8080/api",timeout:1e4,headers:{"Content-Type":"application/json"}}),c=e("project",(()=>{const e=t([]),l=t(!1),c=t(null),s=t(null),n=a((()=>e.value.filter((e=>e.status===r.ACTIVE)))),o=a((()=>e.value.filter((e=>e.status===r.COMPLETED)))),v=a((()=>e.value.filter((e=>e.status===r.CANCELLED)))),i=a((()=>e.value.filter((e=>e.status===r.EXPIRED)))),p=a((()=>({total:e.value.length,active:n.value.length,completed:o.value.length,cancelled:v.value.length,expired:i.value.length}))),j=async()=>{l.value=!0,c.value=null;try{const t=await u.get("/projects");e.value=t.data}catch(t){c.value="获取项目失败，请稍后再试"}finally{l.value=!1}};return{projects:e,loading:l,error:c,currentProject:s,activeProjects:n,completedProjects:o,cancelledProjects:v,expiredProjects:i,projectStatistics:p,fetchAllProjects:j,fetchProjectById:async e=>{l.value=!0,c.value=null;try{const t=await(e=>u.get(`/projects/${e}`))(e);return s.value=t.data,t.data}catch(t){return c.value="获取项目详情失败，请稍后再试",null}finally{l.value=!1}},fetchProjectsByStatus:async e=>{l.value=!0,c.value=null;try{const t=await(e=>u.get(`/projects/status/${e}`))(e);return t.data}catch(t){return c.value="获取项目失败，请稍后再试",[]}finally{l.value=!1}},searchProjects:async e=>{l.value=!0,c.value=null;try{const t=await(e=>u.get("/projects/search",{params:{keyword:e}}))(e);return t.data}catch(t){return c.value="搜索项目失败，请稍后再试",[]}finally{l.value=!1}},saveProject:async e=>{l.value=!0,c.value=null;try{let t;return t=e.id?await((e,t)=>u.put(`/projects/${e}`,t))(e.id,e):await(e=>u.post("/projects",e))(e),await j(),t.data}catch(t){return c.value="保存项目失败，请稍后再试",null}finally{l.value=!1}},removeProject:async t=>{l.value=!0,c.value=null;try{return await(e=>u.delete(`/projects/${e}`))(t),e.value=e.value.filter((e=>e.id!==t)),!0}catch(a){return c.value="删除项目失败，请稍后再试",!1}finally{l.value=!1}}}}));export{r as P,c as u};
