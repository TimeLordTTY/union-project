# ProjectAssistant 项目结构说明

## 项目概述

ProjectAssistant（项目管理小助手）是一个集项目管理、日历安排、文档生成于一体的桌面应用程序，使用前后端分离架构：
- 前端：Vue 3 + TypeScript + Electron
- 后端：Java 17 + Spring Boot + MyBatis + H2数据库

## 目录结构

```
union-project/
├── project-assistant-ui/         # 前端：Vue3 + Electron 桌面应用
├── project-assistant-service/    # 后端：Java 17 + Spring Boot + H2 + MyBatis
├── build-all.bat                 # 一键构建/打包前后端的脚本
├── icon.ico                      # 应用图标
├── myecrt.pfx                    # Electron应用签名证书
└── project-assistant/            # 最终可运行部署包（给女朋友的成品）
    ├── 启动小助手.bat            # 启动脚本
    ├── 调试小助手.bat            # 调试模式启动脚本
    ├── ~❤~宝宝专属项目管理小助手の甜蜜指引~❤~.txt  # 使用说明
    ├── templates/                # 文档模板目录
    ├── data/                     # 数据存储目录
    │   └── projectCalendar.mv.db # H2数据库文件
    └── service_data/             # 服务数据目录
        ├── backend.jar           # 后端服务JAR
        ├── ProjectAssistant.exe  # 前端Electron应用
        ├── ProjectAssistant.bat  # 备用启动脚本(当Electron构建失败时使用)
        ├── jre/                  # Java运行时环境
        ├── lib/                  # 依赖库
        ├── logs/                 # 日志目录
        ├── config/               # 配置文件目录
        └── static/               # 静态资源目录
```

## 后端服务(project-assistant-service)

后端主要提供以下功能：
1. 项目管理API：提供项目的增删改查
2. 日历数据API：提供日期计算和查询功能
3. 文本替换API：自定义替换规则管理
4. 金额转换API：数字金额与中文大写互转
5. 文档生成API：Word/Excel模板填充

后端技术栈：
- Java 17
- Spring Boot 3.x
- MyBatis
- H2嵌入式数据库
- Apache POI (Office文档处理)

## 前端应用(project-assistant-ui)

前端为Electron桌面应用，主要包含以下模块：
1. 项目日历：提供月/周/日视图
2. 项目管理：添加、编辑、删除项目
3. 文本替换：自定义文本替换规则
4. 金额转换：数字与中文金额互转
5. 文档生成：模板填充与导出

前端技术栈：
- Vue 3 + TypeScript
- Element Plus UI库
- Pinia状态管理
- Vue Router路由管理
- Electron桌面应用框架
- Sass/SCSS样式预处理

## 构建与部署

使用`build-all.bat`脚本可以一键构建和部署应用，主要步骤包括：
1. 编译后端服务为JAR文件
2. 编译前端应用为Electron桌面应用
3. 准备JRE环境和依赖库
4. 创建最终部署包`project-assistant`

最终产物是一个完全独立的应用目录，用户只需双击`启动小助手.bat`即可运行应用，无需安装任何依赖环境。

### 构建优化

构建脚本包含多种优化和容错机制：
1. 配置npm使用国内镜像源加速下载
2. 使用多种安装策略，确保前端依赖安装成功
3. Electron构建失败时，自动创建备用启动脚本
4. 支持离线构建，减少网络依赖
5. 优化打包配置，提高构建速度

### 启动方式

应用支持两种启动方式：
1. **标准启动**：通过Electron应用提供完整界面体验
2. **备用启动**：当Electron构建失败时，使用`ProjectAssistant.bat`通过浏览器访问应用

## 应用签名与图标

- `icon.ico`：应用图标，用于Electron应用和任务栏显示
- `myecrt.pfx`：数字证书，用于Electron应用签名

## 彩蛋特性

应用内包含多处彩蛋:
1. 文本替换规则中预置了"我很你"→"我爱你"等特殊替换
2. 金额转换模块对"520"、"1314"等数值会有特别显示
3. 界面中隐藏了多处爱心图标和特殊提示

## 数据备份

所有数据存储在`data/projectCalendar.mv.db`文件中，用户可以通过备份此文件保存所有数据。升级应用时，只需将旧的数据文件复制到新版本的相应位置即可。 