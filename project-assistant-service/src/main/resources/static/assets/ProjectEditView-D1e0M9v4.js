import{x as e,r as a,c as l,aA as t,k as o,y as u,A as r,I as s,M as d,aq as i,G as m,H as n,P as p,ag as c,O as v,a6 as f,u as V,L as _,az as b,z as y}from"./vue-CYQ3jvsg.js";import{u as h,P as j}from"./project-B2gwCvL8.js";import{E as w}from"./elementPlus-D3jm9WeK.js";import{_ as P}from"./index-CSUhv2L2.js";import"./index-fZjk1EK6.js";const D={class:"project-edit"},k=P(e({__name:"ProjectEditView",setup(e){const P=t(),k=b(),x=h(),Y=a(!1),g=l((()=>void 0!==P.params.id)),U=a({name:"",reviewPeriod:30,onlineDate:(new Date).toISOString().slice(0,16),registrationPeriod:10,registrationEndDate:"",earliestReviewDate:"",expectedReviewTime:"",expertReviewTime:"",remark:"",status:j.ACTIVE}),H=async()=>{Y.value=!0;try{await x.saveProject(U.value),w.success("保存成功"),k.push("/projects")}catch(e){w.error("保存项目失败")}finally{Y.value=!1}};return o((()=>{g.value&&P.params.id&&(async e=>{Y.value=!0;try{const a=await x.fetchProjectById(e);a?U.value={...a}:(w.error("找不到项目数据"),k.push("/projects"))}catch(a){w.error("加载项目数据失败")}finally{Y.value=!1}})(Number(P.params.id))})),(e,a)=>{const l=c("el-input"),t=c("el-form-item"),o=c("el-input-number"),b=c("el-date-picker"),h=c("el-option"),w=c("el-select"),P=c("el-button"),k=c("el-form"),x=i("loading");return y(),u("div",D,[r("h1",null,d(g.value?"编辑项目":"添加项目"),1),s((y(),m(k,{model:U.value,"label-width":"120px"},{default:n((()=>[p(t,{label:"项目名称"},{default:n((()=>[p(l,{modelValue:U.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>U.value.name=e),placeholder:"请输入项目名称"},null,8,["modelValue"])])),_:1}),p(t,{label:"评审周期"},{default:n((()=>[p(o,{modelValue:U.value.reviewPeriod,"onUpdate:modelValue":a[1]||(a[1]=e=>U.value.reviewPeriod=e),min:1,placeholder:"自然日"},null,8,["modelValue"])])),_:1}),p(t,{label:"上网日期"},{default:n((()=>[p(b,{modelValue:U.value.onlineDate,"onUpdate:modelValue":a[2]||(a[2]=e=>U.value.onlineDate=e),type:"datetime",placeholder:"选择日期和时间",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])])),_:1}),p(t,{label:"报名期限"},{default:n((()=>[p(o,{modelValue:U.value.registrationPeriod,"onUpdate:modelValue":a[3]||(a[3]=e=>U.value.registrationPeriod=e),min:1,placeholder:"工作日"},null,8,["modelValue"])])),_:1}),p(t,{label:"项目状态"},{default:n((()=>[p(w,{modelValue:U.value.status,"onUpdate:modelValue":a[4]||(a[4]=e=>U.value.status=e)},{default:n((()=>[(y(!0),u(v,null,f(V(j),((e,a)=>(y(),m(h,{key:a,label:e,value:a},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),p(t,{label:"备注"},{default:n((()=>[p(l,{modelValue:U.value.remark,"onUpdate:modelValue":a[5]||(a[5]=e=>U.value.remark=e),type:"textarea",rows:"3",placeholder:"请输入备注信息"},null,8,["modelValue"])])),_:1}),p(t,null,{default:n((()=>[p(P,{type:"primary",onClick:H},{default:n((()=>a[7]||(a[7]=[_("保存")]))),_:1}),p(P,{onClick:a[6]||(a[6]=a=>e.$router.back())},{default:n((()=>a[8]||(a[8]=[_("取消")]))),_:1})])),_:1})])),_:1},8,["model"])),[[x,Y.value]])])}}}),[["__scopeId","data-v-dbe555ae"]]);export{k as default};
